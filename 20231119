普通的订单

新增：有叉叉符号  目标表没有，解锁就新增，从终了日开始续
更新：  有叉叉符号  三表都有，目标表删除，重新注入，从终了日开始续
删除：  无叉叉符号  目标表全删
删除  明细表没有  目标表全删

机器人下的未来订单

新增： 有叉叉符号，且是机器人下单 出现就新增，从开始日续
更新：  有叉叉符号，三表都有，且是机器人下单，目标表删除，时间<开始日的前前日，从开始日续
更新：  有叉叉符号，三表都有，且是机器人下单，目标表删除，时间>=开始日的前前日，从终了日续
删除：无叉叉符号  目标表全删
删除  明细表没有  目标表全删


临时表

新增 结果表无 且明细表有叉叉  
更新 三表有
删除 三表有 明细表无叉叉
删除 明细表无

删除作业
  直接删除

新增和更新作业

  1 储存结果表的月实际最后金额
  2 删除结果表的需更新数据
  3 指针提取需要处理的番号的最后一条明细。

  4 历遍指针

     如果是年额 
       计算年额
       金额 =
     ELSE
        金额

     如果是机器人下单，且 时间<开始日的前前日 
       初始时间 = 请求开始日
     ELSE
        初始日期 = 请求终止日

     如果有契约结束时间
       结束日期 = 契约结束时间
     ELSE
       结束日期 = 开始日期 +需要延长的年
    
    需要新增的月数 = 开始日期~结束日期


     FOR 1 ~新增月数
     
      INSERT INTO
        ：开始日期 + 1 AS 受助日期
        ：金额
        
   
   5 update 月额实际






受注残

根据受注实际的更新时间，获得最新更新的数据（已经用受注月表聚合过番号的金额）
*去看一下受注实际当时是用什么日期换的受注月

根据贩上实际的更新时间，获得最新更新的数据，（用受注月表来聚合番号的金额）

临时表 = 两表结合，计算受注残

与结果表结合

结果表没有的 新增
结果表有的，更新
临时表没有的，删除
